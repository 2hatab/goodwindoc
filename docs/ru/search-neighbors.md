# Поиск соседей по номеру квартиры

Возможность найти владельца объекта недвижимости (квартиры) и отправить ему сообщение в личку. Доступна **в самом домовом чате** с ботом и только **пользователям, прошедшим верификацию** (жителям).

---

## Как это работает

Вы пишете в чат сообщение в формате **`#номер текст сообщения`**. Бот:

1. Проверяет, что вы **верифицированы** в этом чате (вы житель).
2. Ищет среди верифицированных жителей тех, у кого в профиле указан этот номер (квартиры, парковки, кладовой и т.п.).
3. Проверяет, находятся ли найденные жители **в этом чате** и верифицированы ли они в нём.
4. Пытается **отправить им в личные сообщения** текст, который вы написали после `#номер`.

Номер квартиры (или другого объекта) соседа **не показывается** в чате — в переписке видно только ваш запрос. Сообщение уходит соседу в личку от имени бота (с указанием, что это запрос из домового чата).

---

## Пример

В домовом чате вы пишете:

```
#404 срочно свяжитесь со мной
```

или:

```
#12 Добрый день, у вас течёт труба? Мы с 11-й квартиры.
```

Бот обработает запрос и ответит в чате одним из вариантов (см. ниже).

---

## Ответы бота в чате

После обработки вашего сообщения бот ответит в том же чате:

| Ситуация | Ответ бота |
|----------|------------|
| **Соседи найдены, сообщения отправлены** | Написал, что нашёл соседей и отправил им сообщения. |
| **Соседи есть, но сообщение отправить не удалось** | В чате есть соседи с таким номером, но бот не смог им отправить сообщение (например, у пользователя закрыты личные сообщения от незнакомых). |
| **Соседей с таким номером нет** | В чате отсутствуют соседи с указанным номером. |

Точная формулировка ответов может отличаться — бот сообщит результат понятным текстом.

---

## Правила использования

1. **Формат:** `#номер` в начале сообщения, затем пробел и текст. Номер — тот, по которому вы ищете соседа (квартира, парковочное место, кладовая и т.д.), как он указан при верификации.
2. **Где писать:** только в **домовом чате**, где добавлен бот и где вы прошли верификацию.
3. **Кто может писать:** только **верифицированные жители** этого чата. Если вы ещё не прошли верификацию, бот не будет обрабатывать запрос — сначала пройдите [верификацию](verification.md).
4. **Один запрос в сообщении:** используйте один `#номер` в одном сообщении. Для нескольких номеров отправьте несколько сообщений или уточните в чате/у бота.

---

## Частые вопросы

**Бот не реагирует на моё сообщение с #номер.**  
Убедитесь, что вы прошли верификацию в этом чате и имеете статус жителя. Проверьте формат: `#номер` в начале, затем пробел и текст сообщения.

**Можно ли искать по номеру машины или парковки?**  
Да, если при верификации соседи указали такой объект и он привязан к профилю в этом чате. Поиск идёт по тем номерам/объектам, которые верифицированные жители указали в своём профиле для данного чата.

**Сосед не получил сообщение — что делать?**  
Бот сообщит в чате, что не удалось отправить сообщение (например, «в чате есть соседи, но бот не смог им отправить сообщение»). Возможные причины: у пользователя ограничен приём сообщений от незнакомых, он покинул чат или заблокировал бота. Написать ему можно другим способом, если знаете контакт, или попросить в общем чате связаться с вами.

**Кто видит, что я искал соседа по номеру?**  
В чате видны ваше сообщение с `#номер` и ответ бота. Сосед видит только пришедшее ему в личку сообщение от бота (без указания вашего номера квартиры в чате, если это не было в тексте).
